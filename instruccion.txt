warn: FacturasSRI.Core.Services.XmlGeneratorService[0]
      --- INICIO XML SIN FIRMAR ---
<?xml version="1.0" encoding="utf-8"?>
      <factura id="comprobante" version="1.1.0">
        <infoTributaria>
          <ambiente>1</ambiente>
          <tipoEmision>1</tipoEmision>
          <razonSocial>ANILEMA HOFFMANN JIMMY ALEXANDER</razonSocial>
          <nombreComercial>AETHER TECH</nombreComercial>
          <ruc>1850641927001</ruc>
          <claveAcceso>2011202501185064192700110010010000000351234567816</claveAcceso>
          <codDoc>01</codDoc>
          <estab>001</estab>
          <ptoEmi>001</ptoEmi>
          <secuencial>000000035</secuencial>
          <dirMatriz>AV. BENJAMIN FRANKLIN SNN Y EDWARD JENNER</dirMatriz>
        </infoTributaria>
        <infoFactura>
          <fechaEmision>20/11/2025</fechaEmision>
          <dirEstablecimiento>AV. BENJAMIN FRANKLIN SNN Y EDWARD JENNER</dirEstablecimiento>
          <obligadoContabilidad>NO</obligadoContabilidad>
          <tipoIdentificacionComprador>07</tipoIdentificacionComprador>
          <razonSocialComprador>CONSUMIDOR FINAL</razonSocialComprador>
          <identificacionComprador>9999999999</identificacionComprador>
          <totalSinImpuestos>16</totalSinImpuestos>
          <totalDescuento>0</totalDescuento>
          <totalConImpuestos>
            <totalImpuesto>
              <codigo>2</codigo>
              <codigoPorcentaje>4</codigoPorcentaje>
              <baseImponible>16</baseImponible>
              <valor>2.40</valor>
            </totalImpuesto>
          </totalConImpuestos>
          <propina>0.00</propina>
          <importeTotal>18.40</importeTotal>
          <pagos>
            <pago>
              <formaPago>01</formaPago>
              <total>18.40</total>
            </pago>
          </pagos>
        </infoFactura>
        <detalles>
          <detalle>
            <codigoPrincipal>MG01</codigoPrincipal>
            <descripcion>Memoria USB 16GB Generica</descripcion>
            <cantidad>2</cantidad>
            <precioUnitario>8</precioUnitario>
            <descuento>0</descuento>
            <precioTotalSinImpuesto>16</precioTotalSinImpuesto>
            <impuestos>
              <impuesto>
                <codigo>2</codigo>
                <codigoPorcentaje>4</codigoPorcentaje>
                <tarifa>15</tarifa>
                <baseImponible>16</baseImponible>
                <valor>2.40</valor>
              </impuesto>
            </impuestos>
          </detalle>
        </detalles>
      </factura>
--- FIN XML SIN FIRMAR ---
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (99ms) [Parameters=[@__factura_Id_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      SELECT f."FacturaId", f."ClaveAcceso", f."FechaAutorizacion", f."NumeroAutorizacion", f."RespuestaSRI", f."RideUrl", f."XmlFirmado", f."XmlGenerado"
      FROM "FacturasSRI" AS f
      WHERE f."FacturaId" = @__factura_Id_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (104ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']        
      UPDATE "FacturasSRI" SET "XmlFirmado" = @p0, "XmlGenerado" = @p1
      WHERE "FacturaId" = @p2;
==========================================
RESPUESTA SRI (RECEPCIÓN):
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>Error en la sintaxis del archivo XML</faultstring></soap:Fault></soap:Body></soap:Envelope>
==========================================
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (192ms) [Parameters=[@__facturaId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      SELECT f."FacturaId", f."ClaveAcceso", f."FechaAutorizacion", f."NumeroAutorizacion", f."RespuestaSRI", f."RideUrl", f."XmlFirmado", f."XmlGenerado"
      FROM "FacturasSRI" AS f
      WHERE f."FacturaId" = @__facturaId_0
      LIMIT 1
warn: FacturasSRI.Core.Services.SriResponseParserService[0]
      --- INICIO RESPUESTA SRI (RECEPCIÓN) ---
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>Error en la sintaxis del archivo XML</faultstring></soap:Fault></soap:Body></soap:Envelope>
--- FIN RESPUESTA SRI (RECEPCIÓN) ---
fail: FacturasSRI.Infrastructure.Services.InvoiceService[0]
      Error procesando la respuesta del SRI.
      System.Exception: El servicio del SRI devolvió un error (SOAP Fault): Error en la sintaxis del archivo XML
         at FacturasSRI.Core.Services.SriResponseParserService.ParsearRespuestaRecepcion(String soapResponse) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Core\Services\SriResponseParserService.cs:line 34
         at FacturasSRI.Infrastructure.Services.InvoiceService.ProcesarRespuestaSriAsync(Guid facturaId, String claveAcceso, String respuestaRecepcionXml) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Infrastructure\Services\InvoiceService.cs:line 287
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (100ms) [Parameters=[@__facturaId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      SELECT f."FacturaId", f."ClaveAcceso", f."FechaAutorizacion", f."NumeroAutorizacion", f."RespuestaSRI", f."RideUrl", f."XmlFirmado", f."XmlGenerado"
      FROM "FacturasSRI" AS f
      WHERE f."FacturaId" = @__facturaId_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (97ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p3='?' (DbType = Guid), @p2='?'], CommandType='Text', CommandTimeout='30']
      UPDATE "Facturas" SET "Estado" = @p0
      WHERE "Id" = @p1;
      UPDATE "FacturasSRI" SET "RespuestaSRI" = @p2
      WHERE "FacturaId" = @p3;
fail: FacturasSRI.Infrastructure.Services.InvoiceService[0]
      Error en el proceso de creación de factura.
      System.Exception: El servicio del SRI devolvió un error (SOAP Fault): Error en la sintaxis del archivo XML
         at FacturasSRI.Core.Services.SriResponseParserService.ParsearRespuestaRecepcion(String soapResponse) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Core\Services\SriResponseParserService.cs:line 34
         at FacturasSRI.Infrastructure.Services.InvoiceService.ProcesarRespuestaSriAsync(Guid facturaId, String claveAcceso, String respuestaRecepcionXml) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Infrastructure\Services\InvoiceService.cs:line 287
         at FacturasSRI.Infrastructure.Services.InvoiceService.ProcesarRespuestaSriAsync(Guid facturaId, String claveAcceso, String respuestaRecepcionXml) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Infrastructure\Services\InvoiceService.cs:line 330
         at FacturasSRI.Infrastructure.Services.InvoiceService.CreateInvoiceAsync(CreateInvoiceDto invoiceDto) in C:\Users\THINKPAD\Desktop\FacturasSRI\FacturasSRI.Infrastructure\Services\InvoiceService.cs:line 100
