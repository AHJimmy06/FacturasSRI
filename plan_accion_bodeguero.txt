Plan de Acción: Implementación de Reportes para Bodeguero

**Parte 1: Modificación de la Interfaz de Usuario (UI)**

1.  **Ubicación en el Menú:**
    *   Los nuevos enlaces se añadirán a la sección "Reportes" ya existente en `NavMenu.razor`.
    *   Se creará un nuevo subgrupo visual o simplemente se añadirán los enlaces de reporte bajo una nueva autorización. La visibilidad de estos nuevos enlaces se restringirá a los roles `Administrador` y `Bodeguero`.

2.  **Pasos para Implementar la UI:**
    *   **Modificar `NavMenu.razor`:** Añadir los `NavLink` para los 5 reportes de bodeguero dentro de `AuthorizeView` con los roles correctos.
    *   **Crear Nuevos Componentes Razor:** Se crearán 5 nuevos componentes en una nueva carpeta: `FacturasSRI.Web/Components/Pages/Reports/Warehouse/`.
        *   `StockActualReport.razor`
        *   `MovimientosInventarioReport.razor`
        *   `ComprasPorPeriodoReport.razor`
        *   `StockMinimoReport.razor`
        *   `AjustesInventarioReport.razor`
    *   **Contenido de Componentes:** Cada archivo contendrá el HTML para el título, filtros si son necesarios (ej. selectores de fecha), y un área para la tabla de resultados.
    *   **Definición de Rutas:** Se añadirá la directiva `@page` en cada nuevo componente para su ruta (ej. `@page "/reports/warehouse/current-stock"`).

**Parte 2: Lógica del Backend y Acceso a Datos**

1.  **Definir DTOs (Data Transfer Objects):**
    *   En la carpeta `FacturasSRI.Application/Dtos/Reports/`, se crearán las nuevas clases para los datos de cada reporte.
        *   `StockActualDto` (ej: NombreProducto, StockActual)
        *   `MovimientoInventarioDto` (ej: Fecha, Producto, TipoMovimiento, Cantidad, SaldoResultante)
        *   `ComprasPorPeriodoDto` (ej: Producto, CantidadComprada, CostoTotal)
        *   `ProductoStockMinimoDto` (ej: NombreProducto, StockActual, StockMinimo)
        *   `AjusteInventarioReportDto` (ej: Fecha, Producto, TipoAjuste, Cantidad, Motivo)

2.  **Extender el Servicio de Reportes (`IReportService`):**
    *   Se añadirán los nuevos métodos a la interfaz `IReportService.cs`.
        *   `Task<IEnumerable<StockActualDto>> GetStockActualAsync();`
        *   `Task<IEnumerable<MovimientoInventarioDto>> GetMovimientosInventarioAsync(DateTime fechaInicio, DateTime fechaFin);`
        *   `Task<IEnumerable<ComprasPorPeriodoDto>> GetComprasPorPeriodoAsync(DateTime fechaInicio, DateTime fechaFin);`
        *   `Task<IEnumerable<ProductoStockMinimoDto>> GetProductosBajoStockMinimoAsync();`
        *   `Task<IEnumerable<AjusteInventarioReportDto>> GetAjustesInventarioAsync(DateTime fechaInicio, DateTime fechaFin);`
    *   **Implementación:** Se implementarán estos métodos en `ReportService.cs`.
    *   **Lógica de Consultas:** Se consultarán las entidades `Producto`, `Lote`, `AjusteInventario`, y `FacturaDetalle` para obtener y procesar los datos necesarios usando LINQ.

3.  **Extender los Endpoints de API (`ReportEndpoints.cs`):**
    *   Se añadirán los nuevos endpoints HTTP GET al `reportGroup` para cada método del servicio.
    *   Ejemplo: `reportGroup.MapGet("/warehouse/current-stock", async (IReportService service) => ...)`

**Parte 3: Conexión Frontend con Backend**

1.  **Lógica en Componentes Razor:**
    *   En cada nuevo componente `.razor` de reporte, se inyectará `HttpClient`.
    *   Se implementará la lógica en el bloque `@code` para llamar al endpoint de API correspondiente. La llamada se activará al cargar la página o al presionar un botón "Generar", dependiendo de si el reporte usa filtros.
    *   Se gestionarán los estados de carga y error, y se mostrarán los datos recibidos en la tabla HTML.
